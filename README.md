# cos-atproto-pds

This repository contains a suite of tools for running a Bluesky/ATProto PDS, in addition to building, deploying, and managing **custom Bluesky feeds**.

---

## Projects Overview

### 1. ðŸŒ³ **bonsai2** â€” Frontend for Feed Generation

**Purpose:** Provides a user-friendly interface to interact with the feed generation and deployment pipeline.

- Sends **natural language requests** to `bluesky-feed-ruleset-generator`
- Receives a **feed blueprint and metadata**
- Sends the generated ruleset to `bluesky-feed-manager` for deployment

**Key Point:** Bonsai2 itself **does not create or maintain feeds**; it's purely a frontend for interacting with the other two components.

---

### 2. ðŸ“˜ **bluesky-pds** â€” Personal Data Server with Embeddings

**Purpose:** Acts as the backend infrastructure for content ingestion and search.

**Functions:**

- Runs a **full PDS** (Personal Data Server) compatible with ATProto
- Ingests content from the Bluesky firehose
- Adds **embeddings** to posts and authors
- Stores data in `authors` and `posts` tables
- Provides a **search API** that other components can leverage

**Usage:** Both `bluesky-feed-ruleset-generator` and `bluesky-feed-manager` rely on this PDS to access indexed and embedded content for creating and maintaining feeds.

---

### 3. ðŸ§© **bluesky-feed-ruleset-generator** â€” Feed Ruleset Creation

**Purpose:** Generates **feed rulesets** from natural language blueprints.

**Workflow:**

1. Receives a natural language request (from Bonsai2 or other sources)
2. Queries `bluesky-pds` for content, embeddings, authors, and posts
3. Outputs a **structured ruleset and feed metadata**

**Key Point:** It does **not deploy feeds** â€” it only prepares the blueprint/ruleset for deployment.

---

### 4. ðŸš€ **bluesky-feed-manager** â€” Feed Deployment and Maintenance

**Purpose:** Dynamically deploys and manages Bluesky feeds using the rulesets generated by the ruleset generator.

**Workflow:**

1. Takes a **feed ruleset** as input
2. Deploys the feed to Bluesky
3. Dynamically maintains it over time (updates, ranking, filtering, etc.)
4. Uses `bluesky-pds` search API and embeddings to inform ranking and content selection

**Key Point:** This is the only component that actually creates and maintains live feeds on Bluesky.

---

## How Everything Connects

```
[Natural Language Request / Bonsai2 UI]
      â†“
[bluesky-feed-ruleset-generator] â†’ (feed ruleset + metadata)
      â†“
[bluesky-feed-manager] â†’ (deploys feed dynamically)
      â†“
[Bluesky]

bluesky-pds â†’ provides embeddings, author/post tables, and search API used by both ruleset-generator and feed-manager
```

**Summary of Roles:**

| Component                      | Role                                                             |
| ------------------------------ | ---------------------------------------------------------------- |
| Bonsai2                        | Frontend for users to request new feeds                          |
| bluesky-pds                    | Backend PDS, embeddings, posts/authors tables, search API        |
| bluesky-feed-ruleset-generator | Converts natural language requests into structured feed rulesets |
| bluesky-feed-manager           | Deploys and dynamically maintains feeds on Bluesky               |
